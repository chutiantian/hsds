!function($){$.fn.myPagination=function(param){function getCurrPage(){return options.currPage?options.currPage:defaults.currPage}function getPageCount(){return options.pageCount?options.pageCount:defaults.pageCount}function getPageSize(){return options.pageSize?options.pageSize:defaults.pageSize}function getCssStyle(){return options.cssStyle?options.cssStyle:defaults.cssStyle}function getAjax(){return options.ajax&&options.ajax.on?options.ajax:defaults.ajax}function getParam(){return options.ajax.param&&options.ajax.param.on?(options.ajax.param.page=currPage,options.ajax.param):(defaults.ajax.param.page=currPage,defaults.ajax.param)}function getFirst(){if(options.info&&0==options.info.first_on)return"";if(options.info&&options.info.first_on&&options.info.first){var t="<a hef='"+getLink()+"' title='1'>"+options.info.first+"</a>";return t}var t="<a hef='"+getLink()+"' title='1'>"+defaults.info.first+"</a>";return t}function getLast(t){if(options.info&&0==options.info.last_on)return"";if(options.info&&options.info.last_on&&options.info.last){var e="<a hef='"+getLink()+"' title='"+t+"'>"+options.info.last+"</a>";return e}var e="<a hef='"+getLink()+"' title='"+t+"'>"+defaults.info.last+"</a>";return e}function getPrev(){return options.info&&0==options.info.prev_on?"":options.info&&options.info.prev?options.info.prev:defaults.info.prev}function getNext(){return options.info&&0==options.info.next_on?"":options.info&&options.info.next?options.info.next:defaults.info.next}function getLink(){return options.info&&options.info.link?options.info.link:defaults.info.link}function getMsg(){var t="<input type='text' value='"+currPage+"' >";if(options.info&&0==options.info.msg_on)return!1;if(options.info&&options.info.msg){var e=options.info.msg;return e=e.replace("{curr}",t),e=e.replace("{sum}",pageCount)}var e=defaults.info.msg;return e=e.replace("{curr}",t),e=e.replace("{sum}",pageCount)}function getText(){var msg=getMsg();if(!msg)return"";msg=$(msg);var input=msg.children(":text");if(options.info&&options.info.text){var css=options.info.text;for(temp in css){var val=eval("css."+temp);input.css(temp,val)}return msg.html()}var css=defaults.info.text;for(temp in css){var val=eval("css."+temp);input.css(temp,val)}return msg.html()}function getHiddendId(){return options.ajax&&options.ajax.hiddendId?options.ajax.hiddendId:defaults.ajax.hiddendId}function getInt(t){return parseInt(t)}function isCode(t){return t<1?(alert("输入值不能小于1"),!1):/^[0-9]{1,8}$/.exec(t)?!(t>pageCount&&(alert("输入值不能大于总页数"),1)):(alert("请输入正确的数字"),!1)}function updateView(){currPage=getInt(currPage),pageCount=getInt(pageCount);var t=getLink(),e=lastPage=1;e=currPage-tempPage>0?currPage-tempPage:1,e+pageSize>pageCount?(lastPage=pageCount+1,e=lastPage-pageSize):lastPage=e+pageSize;var a="";for(a+=getFirst(),a+=1==currPage?'<span class="disabled" title="'+getPrev()+'">'+getPrev()+" </span>":"<a href='"+t+"' title='"+(currPage-1)+"'>"+getPrev()+" </a>",e;e<lastPage;e++)a+=e==currPage?'<span class="current" title="'+e+'">'+e+"</span>":"<a href='"+t+"' title='"+e+"'>"+e+"</a>";a+=currPage==pageCount?'<span class="disabled" title="'+getNext()+'">'+getNext()+" </span>":"<a href='"+t+"' title='"+(currPage+1)+"'>"+getNext()+" </a>",a+=getLast(pageCount),a+=getText(),obj.html(a),obj.children(":text").keypress(function(t){if(13==t.which){var e=$(this).val();isCode(e)&&(obj.children("a").unbind("click"),createView(e))}}),obj.children("a").each(function(t){var e=this.title;$(this).click(function(){return obj.children("a").unbind("click"),createView(e),$(this).focus(),!1})})}function createView(t){currPage=t;var e=getAjax();if(e.on){var a=e.url,n=getParam();$.ajax({url:a,type:"GET",data:n,contentType:"application/x-www-form-urlencoded;utf-8",async:!0,cache:!1,timeout:6e4,error:function(){alert("访问服务器超时，请重试，谢谢！")},success:function(t){loadPageCount({dataType:e.dataType,callback:e.callback,data:t}),updateView()}})}else updateView()}function checkParam(){return currPage<1?(alert("配置参数错误\n错误代码:-1"),!1):currPage>pageCount?(alert("配置参数错误\n错误代码:-2"),!1):!(pageSize<2)||(alert("配置参数错误\n错误代码:-3"),!1)}function loadPageCount(options){if(options.dataType){var data=options.data,resultPageCount=!1,isB=!0;switch(options.dataType){case"json":data=eval("("+data+")"),resultPageCount=data.pageCount;break;case"xml":resultPageCount=$(data).find("pageCount").text();break;default:isB=!1;var callback=options.callback+"(data)";eval(callback),resultPageCount=$("#pageCount").val()}if(resultPageCount&&(pageCount=resultPageCount),isB){var callback=options.callback+"(data)";eval(callback)}}}if(param&&param instanceof Object){var options,currPage,pageCount,pageSize,tempPage,obj=$(this),defaults=new Object({currPage:1,pageCount:10,pageSize:5,cssStyle:"badoo",ajax:{on:!1,hiddenId:"pageCount",param:{on:!1,page:1}},info:{first:"首页",last:"尾页",next:"下一页",prev:"上一页",first_on:!0,last_on:!0,next_on:!0,prev_on:!0,msg_on:!0,link:"#",msg:"<span>&nbsp;&nbsp;跳{curr}/{sum}页</span>",text:{width:"22px"}}});options=param,currPage=getCurrPage(),pageCount=getPageCount(),pageSize=getPageSize(),tempPage=getInt(pageSize/2);var cssStyle=getCssStyle();obj.addClass(cssStyle),checkParam()&&(updateView(),createView(currPage))}return $(this)}}(jQuery);