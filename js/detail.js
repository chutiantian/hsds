$(document).ready(function(){$.ajax({url:"../js/json/detail.json",type:"get"}).done(function(i){$(".breadcrumb-span2").html(i.goodsDetail[0].purchaseCatalogName),$(".breadcrumb-span2").on("click",function(){window.history.go(-1)});var t=$("#goodsDetail-templete").html(),e=Handlebars.compile(t),o=e(i);$("#content").html(o);var a=$("#goodsDesc-templete").html(),e=Handlebars.compile(a),n=e(i);$("#goodsDesc").html(n),$("#goodsDesc img").lazyload({placeholder:"../img/loading.png",effect:"fadeIn"});var s=$("#detailParam-templete").html(),e=Handlebars.compile(s),g=e(i);$("#detailParam").html(g);var l=i.goodsDetail[0].goodsPicture[0].picturePath;$(".bigImg").find("img").attr("src",l)}).done(function(){function i(i){"none"==$("#winSelector").css("display")&&$("#winSelector,#bigView").show(),$("#winSelector").css(e(i)),i.stopPropagation()}function t(i){"none"!=$("#winSelector").css("display")&&$("#winSelector,#bigView").hide(),i.stopPropagation()}function e(i){if(null!=i){var t=$("#midimg").offset().left,e=$("#midimg").offset().top;X=i.pageX-t-a/2,Y=i.pageY-e-n/2,X=X<0?0:X,Y=Y<0?0:Y,X=X+a>s?s-a:X,Y=Y+n>g?g-n:Y,null==l&&(l=$("#bigView img").outerWidth(),$viewImgHeight=$("#bigView img").height(),(l<200||$viewImgHeight<200)&&(l=$viewImgHeight=800),$height=n*$viewImgHeight/g,$("#bigView").width(a*l/s),$("#bigView").height($height));var o=X*l/s,m=Y*$viewImgHeight/g;return $("#bigView img").css({left:-1*o,top:-1*m}),$("#bigView").css({top:75,left:430}),{left:X,top:Y}}}if($(".smallImg").hover(function(){var i=$(this).attr("src");$(".bigImg").find("img").attr("src",i)}),$(".bigImg").find("img").hover(function(){$("#bigView").find("img").attr("src",this.src)}),$("#wrap").find("li").length>5){$(".smallImgUp").find("img").attr("src","../img/gotop2.gif");var o=0;$(".smallImgUp").find("img").click(function(){o++;var i=-67*o;if($("#wrap").animate({top:i},200),o+5==$("#wrap").find("li").length){var t=$(".smallImgUp").find("img").attr("src");$(".smallImgUp").find("img").attr("src",t),$(".smallImgDown").find("img").attr("src","../img/gobottom2.gif"),o=$("#wrap").find("li").length-6}o+5<$("#wrap").find("li").length&&($(".smallImgUp").find("img").attr("src","../img/gotop2.gif"),$(".smallImgDown").find("img").attr("src","../img/gobottom2.gif"))}),$(".smallImgDown").find("img").click(function(){o>-1&&o--;var i=-67*(o+1);$("#wrap").animate({top:i},200),-1==o?$(".smallImgDown").find("img").attr("src","../img/gobottom.gif"):$(".smallImgUp").find("img").attr("src","../img/gotop2.gif")})}$.fn.decorateIframe=function(i){},$.fn.decorateIframe.defaults={iframeId:"decorateIframe1",iframeZIndex:-1,width:0,height:0},$("#midimg").mouseover(i),$("#midimg,#winSelector").mousemove(i).mouseout(t);var a=$("#winSelector").width(),n=$("#winSelector").height(),s=$("#midimg").width(),g=$("#midimg").height(),l=$viewImgHeight=$height=null;!function(){$("#bigView img").attr("src",$("#midimg").attr("src"))}(),$("#bigView").scrollLeft(0).scrollTop(0)});var i={page:1,limit:"10",goodsId:GetQueryString("goodsid")},t=function(t){function t(t){var e=$("#goodsEvaluate-templete").html(),o=Handlebars.compile(e),a=o(t.page.List);$("#goods-Evaluate").html(a);for(var n=t.page.List,s=0;s<n.length;s++)for(var g=$("#"+n[s].goods_id).find("i"),l=0;l<n[s].evaluate_level;l++)$(g[l]).addClass("Start");orgpageInit("changeNo",".paginorange",t.page.totalPage,i.page)}$.ajax({type:"GET",url:"../js/json/goods-evaluate.json",success:function(i){t(i)},error:function(){alert("请求超时")}})};t(),function(){var i=function(){this.tplId="",this.tpl="",this.tplDetailRight=""};i.prototype={init:function(){this.tplDetailRight=$("#t-detail-right").text()},showRightInfo:function(){var i=Handlebars.compile(this.tplDetailRight);$(".detail-info").html(i([]))}},window.HUI||(window.HUI={}),HUI.goodsDetail=new i}()});var detailTabs=function(i){this.id=i.id,this.sClass=i.selected,this.dom={},this.domsTitle={},this.domsContent={}};detailTabs.prototype={init:function(){var i=$("#"+this.id),t=$(".tabtitle >li"),e=$(".tabcontent >div");this.dom=i,this.domsTitle=t,this.domsContent=e,this.bindEvent()},bindEvent:function(){var i=this;this.domsTitle.bind("click",function(t){var e=$(t.target).attr("tabid");e*=1,i.show(e)})},show:function(i){this.domsTitle.removeClass(this.sClass),this.domsContent.hide(),this.domsTitle.eq(i).addClass(this.sClass),this.domsContent.eq(i).show()}},window.HUI||(window.HUI={}),HUI.Tabs=detailTabs,$(function(){HUI.goodsDetail.init(),new HUI.Tabs({id:"tab1",selected:"detail-tab-selected"}).init()});