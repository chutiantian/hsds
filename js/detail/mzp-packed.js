function MagicZoom_$(t){return document.getElementById(t)}function MagicZoom_getStyle(t,e){if(t.currentStyle){var i=t.currentStyle[e];i=parseInt(i)?i:"0px"}else if(window.getComputedStyle)var o=document.defaultView.getComputedStyle(t,null),i=o?o[e]:null;else i=t.style[e],i=parseInt(i)?i:"0px";return i}function MagicZoom_getBounds(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),i=0,o=0;return document.body&&(document.body.scrollLeft||document.body.scrollTop)?(o=document.body.scrollTop,i=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(o=document.documentElement.scrollTop,i=document.documentElement.scrollLeft),{left:e.left+i,top:e.top+o,right:e.right+i,bottom:e.bottom+o}}}function MagicZoom_getEventBounds(t){var e=0,i=0;return"msie"==MagicZoom_ua?(i=t.clientY,e=t.clientX,document.body&&(document.body.scrollLeft||document.body.scrollTop)?(i=t.clientY+document.body.scrollTop,e=t.clientX+document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(i=t.clientY+document.documentElement.scrollTop,e=t.clientX+document.documentElement.scrollLeft)):(i=t.clientY,e=t.clientX,i+=window.pageYOffset,e+=window.pageXOffset),{x:e,y:i}}function MagicView_ia(){return!1}function MagicZoom_addEventListener(t,e,i){if("gecko"==MagicZoom_ua||"opera"==MagicZoom_ua||"safari"==MagicZoom_ua)try{t.addEventListener(e,i,!1)}catch(t){}else"msie"==MagicZoom_ua&&t.attachEvent("on"+e,i)}function MagicZoom_removeEventListener(t,e,i){"gecko"==MagicZoom_ua||"opera"==MagicZoom_ua||"safari"==MagicZoom_ua?t.removeEventListener(e,i,!1):"msie"==MagicZoom_ua&&t.detachEvent("on"+e,i)}function MagicZoom_concat(){for(var t=[],e=0;e<arguments.length;e++)for(var i=0;i<arguments[e].length;i++)t.push(arguments[e][i]);return t}function MagicZoom_withoutFirst(t,e){result=[];for(var i=e;i<t.length;i++)result.push(t[i]);return result}function MagicZoom_createMethodReference(t,e){var i=MagicZoom_withoutFirst(arguments,2);return function(){t[e].apply(t,MagicZoom_concat(i,arguments))}}function MagicZoom_stopEventPropagation(t){"gecko"==MagicZoom_ua||"safari"==MagicZoom_ua||"opera"==MagicZoom_ua?(t.cancelBubble=!0,t.preventDefault(),t.stopPropagation()):"msie"==MagicZoom_ua&&(window.event.cancelBubble=!0)}function MagicZoom(t,e,i,o,s){this.version="2.3",this.recalculating=!1,this.smallImageCont=MagicZoom_$(t),this.smallImage=MagicZoom_$(e),this.bigImageCont=MagicZoom_$(i),this.bigImage=MagicZoom_$(o),this.pup=0,this.settings=s,this.settings.header||(this.settings.header=""),this.bigImageSizeX=0,this.bigImageSizeY=0,this.smallImageSizeX=0,this.smallImageSizeY=0,this.popupSizeX=20,this.popupSizey=20,this.positionX=0,this.positionY=0,this.bigImageContStyleTop="",this.loadingCont=null,""!=this.settings.loadingImg&&(this.loadingCont=document.createElement("DIV"),this.loadingCont.style.position="absolute",this.loadingCont.style.visibility="hidden",this.loadingCont.className="MagicZoomLoading",this.loadingCont.style.display="block",this.loadingCont.style.textAlign="center",this.loadingCont.innerHTML=this.settings.loadingText+'<br/><img border="0" alt="'+this.settings.loadingText+'" src="'+this.settings.loadingImg+'"/>',this.smallImageCont.appendChild(this.loadingCont)),this.baseuri="",this.safariOnLoadStarted=!1,MagicZoom_zooms.push(this),this.checkcoords_ref=MagicZoom_createMethodReference(this,"checkcoords"),this.mousemove_ref=MagicZoom_createMethodReference(this,"mousemove")}function xgdf7fsgd56(t){var e="";for(i=0;i<t.length;i++)e+=String.fromCharCode(14^t.charCodeAt(i));return e}function MagicZoom_findSelectors(t,e){for(var i=window.document.getElementsByTagName("A"),o=0;o<i.length;o++)if(i[o].rel==t){MagicZoom_addEventListener(i[o],"click",function(t){return"msie"!=MagicZoom_ua?this.blur():window.focus(),MagicZoom_stopEventPropagation(t),!1}),MagicZoom_addEventListener(i[o],e.settings.thumb_change,MagicZoom_createMethodReference(e,"replaceZoom",i[o])),i[o].style.outline="0",i[o].mzextend=MagicZoom_extendElement,i[o].mzextend({zoom:e,selectThisZoom:function(){this.zoom.replaceZoom(null,this)}});var s=document.createElement("IMG");s.src=i[o].href,s.style.position="absolute",s.style.left="-10000px",s.style.top="-10000px",document.body.appendChild(s),s=document.createElement("IMG"),s.src=i[o].rev,s.style.position="absolute",s.style.left="-10000px",s.style.top="-10000px",document.body.appendChild(s)}}function MagicZoom_stopZooms(){for(;MagicZoom_zooms.length>0;){var t=MagicZoom_zooms.pop();t.stopZoom(),delete t}}function MagicZoom_findZooms(){for(var t="Loading Zoom",e="",i=window.document.getElementsByTagName("IMG"),o=0;o<i.length;o++)if(/MagicZoomLoading/.test(i[o].className)){""!=i[o].alt&&(t=i[o].alt),e=i[o].src;break}for(var s=window.document.getElementsByTagName("A"),o=0;o<s.length;o++)if(/MagicZoom/.test(s[o].className)){for(;s[o].firstChild&&"IMG"!=s[o].firstChild.tagName;)s[o].removeChild(s[o].firstChild);if("IMG"!=s[o].firstChild.tagName)throw"Invalid MagicZoom invocation!";var a=Math.round(1e6*Math.random());s[o].style.position="relative",s[o].style.display="block",s[o].style.outline="0",s[o].style.textDecoration="none",MagicZoom_addEventListener(s[o],"click",function(t){return"msie"!=MagicZoom_ua&&this.blur(),MagicZoom_stopEventPropagation(t),!1}),""==s[o].id&&(s[o].id="sc"+a),"msie"==MagicZoom_ua&&(s[o].style.zIndex=0);var n=s[o].firstChild;n.id="sim"+a;var l=document.createElement("DIV");l.id="bc"+a,re=new RegExp(/opacity(\s+)?:(\s+)?(\d+)/i),matches=re.exec(s[o].rel);var g=50;matches&&(g=parseInt(matches[3])),re=new RegExp(/thumb\-change(\s+)?:(\s+)?(click|mouseover)/i),matches=re.exec(s[o].rel);var c="click";matches&&(c=matches[3]),re=new RegExp(/zoom\-width(\s+)?:(\s+)?(\w+)/i);var h=-1;matches=re.exec(s[o].rel),l.style.width="280px",matches&&(l.style.width=matches[3],h=matches[3]),re=new RegExp(/zoom\-height(\s+)?:(\s+)?(\w+)/i);var r=-1;matches=re.exec(s[o].rel),l.style.height="280px",matches&&(l.style.height=matches[3],r=matches[3]),re=new RegExp(/zoom\-position(\s+)?:(\s+)?(\w+)/i),matches=re.exec(s[o].rel);var m="right";if(matches)switch(matches[3]){case"left":m="left";break;case"bottom":m="bottom";break;case"top":m="top";break;case"custom":m="custom";break;case"inner":m="inner"}re=new RegExp(/drag\-mode(\s+)?:(\s+)?(true|false)/i),matches=re.exec(s[o].rel);var d=!1;matches&&"true"==matches[3]&&(d=!0),re=new RegExp(/always\-show\-zoom(\s+)?:(\s+)?(true|false)/i),matches=re.exec(s[o].rel);var p=!1;matches&&"true"==matches[3]&&(p=!0),l.style.overflow="hidden",l.className="MagicZoomBigImageCont",l.style.zIndex=100,l.style.visibility="hidden",l.style.position="custom"!=m?"absolute":"relative";var u=document.createElement("IMG");u.id="bim"+a,u.src=s[o].href,l.appendChild(u),"custom"!=m?s[o].appendChild(l):MagicZoom_$(s[o].id+"-big").appendChild(l);var b={bigImage_always_visible:p,drag_mode:d,header:s[o].title,opacity:g,thumb_change:c,position:m,loadingText:t,loadingImg:e,zoomWidth:h,zoomHeight:r};"inner"==m&&(s[o].title="");var f=new MagicZoom(s[o].id,"sim"+a,l.id,"bim"+a,b);s[o].mzextend=MagicZoom_extendElement,s[o].mzextend({zoom:f}),f.initZoom(),MagicZoom_findSelectors(s[o].id,f)}}var MagicZoom_ua="msie",W=navigator.userAgent.toLowerCase();-1!=W.indexOf("opera")?MagicZoom_ua="opera":-1!=W.indexOf("msie")?MagicZoom_ua="msie":-1!=W.indexOf("safari")?MagicZoom_ua="safari":-1!=W.indexOf("mozilla")&&(MagicZoom_ua="gecko");var MagicZoom_zooms=new Array,MagicZoom_extendElement=function(){var t=arguments;t[1]||(t=[this,t[0]]);for(var e in t[1])t[0][e]=t[1][e];return t[0]};if(MagicZoom.prototype.stopZoom=function(){MagicZoom_removeEventListener(window.document,"mousemove",this.checkcoords_ref),MagicZoom_removeEventListener(this.smallImageCont,"mousemove",this.mousemove_ref),"custom"==this.settings.position?MagicZoom_$(this.smallImageCont.id+"-big").removeChild(this.bigImageCont):this.smallImageCont.removeChild(this.bigImageCont),this.smallImageCont.removeChild(this.pup)},MagicZoom.prototype.checkcoords=function(t){for(var e=MagicZoom_getEventBounds(t),i=e.x,o=e.y,s=0,a=0,n=this.smallImage;n&&"BODY"!=n.tagName&&"HTML"!=n.tagName;)s+=n.offsetTop,a+=n.offsetLeft,n=n.offsetParent;if("msie"==MagicZoom_ua){var e=MagicZoom_getBounds(this.smallImage);a=e.left,s=e.top}return a+=parseInt(MagicZoom_getStyle(this.smallImage,"borderLeftWidth")),s+=parseInt(MagicZoom_getStyle(this.smallImage,"borderTopWidth")),"msie"==MagicZoom_ua&&document.compatMode&&"backcompat"==document.compatMode.toLowerCase()||(a+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft")),s+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingTop"))),i>parseInt(a+this.smallImageSizeX)?(this.hiderect(),!1):i<parseInt(a)?(this.hiderect(),!1):o>parseInt(s+this.smallImageSizeY)?(this.hiderect(),!1):o<parseInt(s)?(this.hiderect(),!1):("msie"==MagicZoom_ua&&(this.smallImageCont.style.zIndex=1),!0)},MagicZoom.prototype.mousedown=function(t){MagicZoom_stopEventPropagation(t),this.smallImageCont.style.cursor="move"},MagicZoom.prototype.mouseup=function(t){MagicZoom_stopEventPropagation(t),this.smallImageCont.style.cursor="default"},MagicZoom.prototype.mousemove=function(t){for(MagicZoom_stopEventPropagation(t),i=0;i<MagicZoom_zooms.length;i++)MagicZoom_zooms[i]!=this&&MagicZoom_zooms[i].checkcoords(t);if((!this.settings||1!=this.settings.drag_mode||"move"==this.smallImageCont.style.cursor)&&!this.recalculating&&this.checkcoords(t)){this.recalculating=!0;var e=this.smallImage,o=0,s=0;if("gecko"==MagicZoom_ua||"opera"==MagicZoom_ua||"safari"==MagicZoom_ua)for(var a=e;"BODY"!=a.tagName&&"HTML"!=a.tagName;)s+=a.offsetTop,o+=a.offsetLeft,a=a.offsetParent;else{var n=MagicZoom_getBounds(this.smallImage);o=n.left,s=n.top}o+=parseInt(MagicZoom_getStyle(this.smallImage,"borderLeftWidth")),s+=parseInt(MagicZoom_getStyle(this.smallImage,"borderTopWidth")),"msie"==MagicZoom_ua&&document.compatMode&&"backcompat"==document.compatMode.toLowerCase()||(o+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft")),s+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingTop")));var n=MagicZoom_getEventBounds(t),l=n.x,g=n.y;this.positionX=l-o,this.positionY=g-s,this.positionX+this.popupSizeX/2>=this.smallImageSizeX&&(this.positionX=this.smallImageSizeX-this.popupSizeX/2),this.positionY+this.popupSizeY/2>=this.smallImageSizeY&&(this.positionY=this.smallImageSizeY-this.popupSizeY/2),this.positionX-this.popupSizeX/2<=0&&(this.positionX=this.popupSizeX/2),this.positionY-this.popupSizeY/2<=0&&(this.positionY=this.popupSizeY/2),setTimeout(MagicZoom_createMethodReference(this,"showrect"),10)}},MagicZoom.prototype.showrect=function(){var t=this.positionX-this.popupSizeX/2,e=this.positionY-this.popupSizeY/2,i=t*(this.bigImageSizeX/this.smallImageSizeX),o=e*(this.bigImageSizeY/this.smallImageSizeY);"rtl"==document.documentElement.dir&&(i=(this.positionX+this.popupSizeX/2-this.smallImageSizeX)*(this.bigImageSizeX/this.smallImageSizeX)),t+=parseInt(MagicZoom_getStyle(this.smallImage,"borderLeftWidth")),e+=parseInt(MagicZoom_getStyle(this.smallImage,"borderTopWidth")),"msie"==MagicZoom_ua&&document.compatMode&&"backcompat"==document.compatMode.toLowerCase()||(t+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft")),e+=parseInt(MagicZoom_getStyle(this.smallImage,"paddingTop"))),this.pup.style.left=t+"px",this.pup.style.top=e+"px",this.pup.style.visibility="visible",this.bigImageSizeX-i<parseInt(this.bigImageCont.style.width)&&(i=this.bigImageSizeX-parseInt(this.bigImageCont.style.width));var s=0;if(this.settings&&""!=this.settings.header)var s=19;this.bigImageSizeY>parseInt(this.bigImageCont.style.height)-s&&this.bigImageSizeY-o<parseInt(this.bigImageCont.style.height)-s&&(o=this.bigImageSizeY-parseInt(this.bigImageCont.style.height)+s),this.bigImage.style.left=-i+"px",this.bigImage.style.top=-o+"px",this.bigImageCont.style.top=this.bigImageContStyleTop,this.bigImageCont.style.display="block",this.bigImageCont.style.visibility="visible",this.bigImage.style.display="block",this.bigImage.style.visibility="visible",this.recalculating=!1},MagicZoom.prototype.hiderect=function(){this.settings&&1==this.settings.bigImage_always_visible||(this.pup&&(this.pup.style.visibility="hidden"),this.bigImageCont.style.top="-10000px","msie"==MagicZoom_ua&&(this.smallImageCont.style.zIndex=0))},MagicZoom.prototype.recalculatePopupDimensions=function(){if(this.popupSizeX=parseInt(this.bigImageCont.style.width)/(this.bigImageSizeX/this.smallImageSizeX),this.settings&&""!=this.settings.header?this.popupSizeY=(parseInt(this.bigImageCont.style.height)-19)/(this.bigImageSizeY/this.smallImageSizeY):this.popupSizeY=parseInt(this.bigImageCont.style.height)/(this.bigImageSizeY/this.smallImageSizeY),this.popupSizeX>this.smallImageSizeX&&(this.popupSizeX=this.smallImageSizeX),this.popupSizeY>this.smallImageSizeY&&(this.popupSizeY=this.smallImageSizeY),this.popupSizeX=Math.round(this.popupSizeX),this.popupSizeY=Math.round(this.popupSizeY),document.compatMode&&"backcompat"==document.compatMode.toLowerCase())this.pup.style.width=this.popupSizeX+"px",this.pup.style.height=this.popupSizeY+"px";else{var t=parseInt(MagicZoom_getStyle(this.pup,"borderLeftWidth"));this.pup.style.width=this.popupSizeX-2*t+"px",this.pup.style.height=this.popupSizeY-2*t+"px"}},MagicZoom.prototype.initPopup=function(){this.pup=document.createElement("DIV"),this.pup.className="MagicZoomPup",this.pup.style.zIndex=10,this.pup.style.visibility="hidden",this.pup.style.position="absolute",this.pup.style.opacity=parseFloat(this.settings.opacity/100),this.pup.style["-moz-opacity"]=parseFloat(this.settings.opacity/100),this.pup.style["-html-opacity"]=parseFloat(this.settings.opacity/100),this.pup.style.filter="alpha(Opacity="+this.settings.opacity+")",this.smallImageCont.appendChild(this.pup),this.recalculatePopupDimensions(),this.smallImageCont.unselectable="on",this.smallImageCont.style.MozUserSelect="none",this.smallImageCont.onselectstart=MagicView_ia,this.smallImageCont.oncontextmenu=MagicView_ia},MagicZoom.prototype.initBigContainer=function(){var t=this.bigImage.src;for(this.bigImageSizeY<parseInt(this.bigImageCont.style.height)&&(this.bigImageCont.style.height=this.bigImageSizeY+"px",this.settings&&""!=this.settings.header&&(this.bigImageCont.style.height=19+this.bigImageSizeY+"px")),this.bigImageSizeX<parseInt(this.bigImageCont.style.width)&&(this.bigImageCont.style.width=this.bigImageSizeX+"px");this.bigImageCont.firstChild;)this.bigImageCont.removeChild(this.bigImageCont.firstChild);if("msie"==MagicZoom_ua){var e=document.createElement("IFRAME");e.style.left="0px",e.style.top="0px",e.style.position="absolute",e.src="javascript:''",e.style.filter="progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)",e.style.width=this.bigImageCont.style.width,e.style.height=this.bigImageCont.style.height,e.frameBorder=0,this.bigImageCont.appendChild(e)}if(this.settings&&""!=this.settings.header){var e=document.createElement("DIV");e.className="MagicZoomHeader",e.id="MagicZoomHeader"+this.bigImageCont.id,e.style.position="relative",e.style.zIndex=10,e.style.left="0px",e.style.top="0px",e.style.padding="3px",e.innerHTML=this.settings.header,this.bigImageCont.appendChild(e)}var i=document.createElement("DIV");i.style.overflow="hidden",this.bigImageCont.appendChild(i),this.bigImage=document.createElement("IMG"),this.bigImage.src=t,this.bigImage.style.position="relative",this.bigImage.style.borderWidth="0px",this.bigImage.style.padding="0px",this.bigImage.style.left="0px",this.bigImage.style.top="0px",i.appendChild(this.bigImage);var o=["","#ff0000",10,"bold","center","100%",20];if(void 0!==o){var s=xgdf7fsgd56(o[0]),e=document.createElement("div");e.style.color=o[1],e.style.fontSize=o[2]+"px",e.style.fontWeight=o[3],e.style.fontFamily="Tahoma",e.style.position="absolute",e.style.width=o[5],e.style.textAlign=o[4],e.innerHTML=s,e.style.left="0px",e.style.top=parseInt(this.bigImageCont.style.height)-o[6]+"px",this.bigImageCont.appendChild(e)}},MagicZoom.prototype.initZoom=function(){if(null==this.loadingCont||this.bigImage.complete&&0!=this.bigImage.width&&0!=this.bigImage.height||0==this.smallImage.width||0==this.smallImage.height||(this.loadingCont.style.left=parseInt(this.smallImage.width)/2-parseInt(this.loadingCont.offsetWidth)/2+"px",this.loadingCont.style.top=parseInt(this.smallImage.height)/2-parseInt(this.loadingCont.offsetHeight)/2+"px",this.loadingCont.style.visibility="visible"),"safari"==MagicZoom_ua){if(!this.safariOnLoadStarted)return MagicZoom_addEventListener(this.bigImage,"load",MagicZoom_createMethodReference(this,"initZoom")),void(this.safariOnLoadStarted=!0)}else if(!this.bigImage.complete||!this.smallImage.complete)return void setTimeout(MagicZoom_createMethodReference(this,"initZoom"),100);if(this.bigImage.style.borderWidth="0px",this.bigImage.style.padding="0px",this.bigImageSizeX=this.bigImage.width,this.bigImageSizeY=this.bigImage.height,this.smallImageSizeX=this.smallImage.width,this.smallImageSizeY=this.smallImage.height,0==this.bigImageSizeX||0==this.bigImageSizeY||0==this.smallImageSizeX||0==this.smallImageSizeY)return void setTimeout(MagicZoom_createMethodReference(this,"initZoom"),100);"opera"!=MagicZoom_ua&&("msie"!=MagicZoom_ua||document.compatMode&&"backcompat"==document.compatMode.toLowerCase())||(this.smallImageSizeX-=parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft")),this.smallImageSizeX-=parseInt(MagicZoom_getStyle(this.smallImage,"paddingRight")),this.smallImageSizeY-=parseInt(MagicZoom_getStyle(this.smallImage,"paddingTop")),this.smallImageSizeY-=parseInt(MagicZoom_getStyle(this.smallImage,"paddingBottom"))),null!=this.loadingCont&&(this.loadingCont.style.visibility="hidden"),this.smallImageCont.style.width=this.smallImage.width+"px",this.bigImageCont.style.top="-10000px",this.bigImageContStyleTop="0px";var t=MagicZoom_getBounds(this.smallImage);switch(this.bigImageCont.style.left=t?t.right-t.left+15+"px":this.smallImageSizeX+parseInt(MagicZoom_getStyle(this.smallImage,"borderLeftWidth"))+parseInt(MagicZoom_getStyle(this.smallImage,"borderRightWidth"))+parseInt(MagicZoom_getStyle(this.smallImage,"paddingLeft"))+parseInt(MagicZoom_getStyle(this.smallImage,"paddingRight"))+15+"px",this.settings.position){case"left":this.bigImageCont.style.left="-"+(15+parseInt(this.bigImageCont.style.width))+"px";break;case"bottom":this.bigImageContStyleTop=t?t.bottom-t.top+15+"px":this.smallImage.height+15+"px",this.bigImageCont.style.left="0px";break;case"top":this.bigImageContStyleTop="-"+(15+parseInt(this.bigImageCont.style.height))+"px",this.bigImageCont.style.left="0px";break;case"custom":this.bigImageCont.style.left="0px",this.bigImageContStyleTop="0px";break;case"inner":this.bigImageCont.style.left="0px",this.bigImageContStyleTop="0px",-1==this.settings.zoomWidth&&(this.bigImageCont.style.width=this.smallImageSizeX+"px"),-1==this.settings.zoomHeight&&(this.bigImageCont.style.height=this.smallImageSizeY+"px")}if(this.pup)return void this.recalculatePopupDimensions();this.initBigContainer(),this.initPopup(),MagicZoom_addEventListener(window.document,"mousemove",this.checkcoords_ref),MagicZoom_addEventListener(this.smallImageCont,"mousemove",this.mousemove_ref),this.settings&&1==this.settings.drag_mode&&(MagicZoom_addEventListener(this.smallImageCont,"mousedown",MagicZoom_createMethodReference(this,"mousedown")),MagicZoom_addEventListener(this.smallImageCont,"mouseup",MagicZoom_createMethodReference(this,"mouseup"))),!this.settings||1!=this.settings.drag_mode&&1!=this.settings.bigImage_always_visible||(this.positionX=this.smallImageSizeX/2,this.positionY=this.smallImageSizeY/2,this.showrect())},MagicZoom.prototype.replaceZoom=function(t,e){if(t.href!=this.bigImage.src){var i=document.createElement("IMG");i.id=this.bigImage.id,i.src=t.href;this.bigImage.parentNode.replaceChild(i,this.bigImage),this.bigImage=i,this.bigImage.style.position="relative",this.smallImage.src=t.rev,""!=t.title&&MagicZoom_$("MagicZoomHeader"+this.bigImageCont.id)&&(MagicZoom_$("MagicZoomHeader"+this.bigImageCont.id).firstChild.data=t.title),this.safariOnLoadStarted=!1,this.initZoom(),this.smallImageCont.href=t.href;try{MagicThumb.refresh()}catch(e){}}},"msie"==MagicZoom_ua)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}MagicZoom_addEventListener(window,"load",MagicZoom_findZooms),function(){window.MagicTools={version:"1.12",browser:{ie:!(!window.attachEvent||window.opera),ie6:!(!window.attachEvent||window.XMLHttpRequest),ie7:!(!window.ActiveXObject||!window.XMLHttpRequest),opera:!!window.opera,webkit:navigator.userAgent.indexOf("AppleWebKit/")>-1,gecko:navigator.userAgent.indexOf("Gecko")>-1&&-1==navigator.userAgent.indexOf("KHTML"),mobilesafari:!!navigator.userAgent.match(/Apple.*Mobile.*Safari/),backCompatMode:document.compatMode&&"backcompat"==document.compatMode.toLowerCase(),domLoaded:!1},$:function(t){return t?("string"==typeof t&&(t=document.getElementById(t)),t):null},$A:function(t){if(!t)return[];if(t.toArray)return t.toArray();for(var e=t.length||0,i=new Array(e);e--;)i[e]=t[e];return i},extend:function(t,e){if(void 0===t)return t;for(var i in e)t[i]=e[i];return t},concat:function(){for(var t=[],e=0,i=arguments.length;e<i;e++)for(var o=0,s=arguments[e].length;o<s;o++)t.push(arguments[e][o]);return t},bind:function(){var t=MagicTools.$A(arguments),e=t.shift(),i=t.shift();return function(){return e.apply(i,MagicTools.concat(t,MagicTools.$A(arguments)))}},bindAsEvent:function(){var t=MagicTools.$A(arguments),e=t.shift(),i=t.shift();return function(o){return e.apply(i,MagicTools.concat([o||window.event],t))}},inArray:function(t,e){for(var i=e.length,o=0;o<i;o++)if(t===e[o])return!0;return!1},now:function(){return(new Date).getTime()},isBody:function(t){return/^(?:body|html)$/i.test(t.tagName)},getPageSize:function(){var t,e,i,o,s,a,n=MagicTools.browser.backCompatMode?document.body:document.documentElement,l=document.body;t=window.innerWidth&&window.scrollMaxX?window.innerWidth+window.scrollMaxX:l.scrollWidth>l.offsetWidth?l.scrollWidth:MagicTools.browser.ie&&MagicTools.browser.backCompatMode?l.scrollWidth:l.offsetWidth,e=window.innerHeight&&window.scrollMaxY?window.innerHeight+window.scrollMaxY:l.scrollHeight>l.offsetHeight?l.scrollHeight:l.offsetHeight;var g,c;return g=MagicTools.browser.ie?n.scrollWidth:document.documentElement.clientWidth||self.innerWidth,c=MagicTools.browser.ie?n.clientHeight:document.documentElement.clientHeight||self.innerHeight,s=self.pageXOffset?self.pageXOffset:n.scrollLeft,a=self.pageYOffset?self.pageYOffset:n.scrollTop,i=e<c?c:e,o=t<g?g:t,{pageWidth:o,pageHeight:i,width:MagicTools.browser.ie?n.clientWidth:document.documentElement.clientWidth||self.innerWidth,height:MagicTools.browser.ie?n.clientHeight:MagicTools.browser.opera?self.innerHeight:self.innerHeight||document.documentElement.clientHeight,scrollX:s,scrollY:a,viewWidth:t,viewHeight:e}},Event:{add:function(t,e,i){if(t===document&&"domready"==e){if(MagicTools.browser.domLoaded)return void i.call(this);MagicTools.onDomReadyList.push(i),MagicTools.onDomReadyList.length<=1&&MagicTools.bindDomReady()}t=MagicTools.$(t),t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)},remove:function(t,e,i){t=MagicTools.$(t),t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i)},stop:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1},fire:function(t,e,i){(t=MagicTools.$(t))==document&&document.createEvent&&!t.dispatchEvent&&(t=document.documentElement);var o;return document.createEvent?(o=document.createEvent(e),o.initEvent(i,!0,!0)):(o=document.createEventObject(),o.eventType=e),document.createEvent?t.dispatchEvent(o):t.fireEvent("on"+i,o),o}},String:{trim:function(t){return t.replace(/^\s+|\s+$/g,"")},camelize:function(t){return t.replace(/-(\D)/g,function(t,e){return e.toUpperCase()})}},Element:{hasClass:function(t,e){if(t=MagicTools.$(t))return(" "+t.className+" ").indexOf(" "+e+" ")>-1},addClass:function(t,e){(t=MagicTools.$(t))&&(MagicTools.Element.hasClass(t,e)||(t.className+=(t.className?" ":"")+e))},removeClass:function(t,e){(t=MagicTools.$(t))&&(t.className=MagicTools.String.trim(t.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)"),"$1")))},getStyle:function(t,e){t=MagicTools.$(t),e="float"==e?"cssFloat":MagicTools.String.camelize(e);var i=t.style[e];if(!i&&document.defaultView){var o=document.defaultView.getComputedStyle(t,null);i=o?o[e]:null}else!i&&t.currentStyle&&(i=t.currentStyle[e]);return"opacity"==e?i?parseFloat(i):1:(/^(border(Top|Bottom|Left|Right)Width)|((padding|margin)(Top|Bottom|Left|Right))$/.test(e)&&(i=parseInt(i)?i:"0px"),"auto"==i?null:i)},setStyle:function(t,e){t=MagicTools.$(t);var i=t.style;for(var o in e)try{if("opacity"===o){MagicTools.Element.setOpacity(t,e[o]);continue}if("float"===o){i[void 0===i.styleFloat?"cssFloat":"styleFloat"]=e[o];continue}i[MagicTools.String.camelize(o)]=e[o]+function(t,e){return"number"==typeof e&&"zIndex"!==t&&"zoom"!==t?"px":""}(MagicTools.String.camelize(o),e[o])}catch(t){}return t},setOpacity:function(t,e){t=MagicTools.$(t);var i=t.style;return e=parseFloat(e),0==e?"hidden"!=i.visibility&&(i.visibility="hidden"):(e>1&&(e=parseFloat(e/100)),"visible"!=i.visibility&&(i.visibility="visible")),t.currentStyle&&t.currentStyle.hasLayout||(i.zoom=1),MagicTools.browser.ie&&(i.filter=1==e?"":"alpha(opacity="+100*e+")"),i.opacity=e,t},getSize:function(t){return t=MagicTools.$(t),{width:t.offsetWidth,height:t.offsetHeight}},getScrolls:function(t){t=MagicTools.$(t);for(var e={x:0,y:0};t&&!MagicTools.isBody(t);)e.x+=t.scrollLeft,e.y+=t.scrollTop,t=t.parentNode;return e},getPosition:function(t,e){e=e||!1,t=MagicTools.$(t);var i=MagicTools.Element.getScrolls(t),o=0,s=0;do{if(o+=t.offsetLeft||0,s+=t.offsetTop||0,t=t.offsetParent,e)for(;t&&"relative"==t.style.position;)t=t.offsetParent}while(t);return{top:s-i.y,left:o-i.x}},getRect:function(t,e){var i=MagicTools.Element.getPosition(t,e),o=MagicTools.Element.getSize(t);return{top:i.top,bottom:i.top+o.height,left:i.left,right:i.left+o.width}},update:function(t,e){(t=MagicTools.$(t))&&(t.innerHTML=e)}},Transition:{linear:function(t){return t},sin:function(t){return-(Math.cos(Math.PI*t)-1)/2},quadIn:function(t){return Math.pow(t,2)},quadOut:function(t){return 1-MagicTools.Transition.quadIn(1-t)},cubicIn:function(t){return Math.pow(t,3)},cubicOut:function(t){return 1-MagicTools.Transition.cubicIn(1-t)},backIn:function(t,e){return e=e||1.618,Math.pow(t,2)*((e+1)*t-e)},backOut:function(t,e){return 1-MagicTools.Transition.backIn(1-t)},elastic:function(t,e){return e=e||[],Math.pow(2,10*--t)*Math.cos(20*t*Math.PI*(e[0]||1)/3)},none:function(t){return 0}},onDomReadyList:[],onDomReadyTimer:null,onDomReady:function(){if(!MagicTools.browser.domLoaded){MagicTools.browser.domLoaded=!0,MagicTools.onDomReadyTimer&&clearTimeout(MagicTools.onDomReadyTimer);for(var t=0,e=MagicTools.onDomReadyList.length;t<e;t++)MagicTools.onDomReadyList[t].apply(document)}},bindDomReady:function(){MagicTools.browser.webkit&&function(){if(MagicTools.inArray(document.aq,["loaded","complete"]))return void MagicTools.onDomReady();MagicTools.onDomReadyTimer=setTimeout(arguments.callee,50)}(),MagicTools.browser.ie&&window==top&&function(){try{document.documentElement.doScroll("left")}catch(t){return void(MagicTools.onDomReadyTimer=setTimeout(arguments.callee,50))}MagicTools.onDomReady()}(),MagicTools.browser.opera&&MagicTools.Event.add(document,"DOMContentLoaded",function(){for(var t=0,e=document.styleSheets.length;t<e;t++){if(document.styleSheets[t].disabled)return void(MagicTools.onDomReadyTimer=setTimeout(arguments.callee,50));MagicTools.onDomReady()}}),MagicTools.Event.add(document,"DOMContentLoaded",MagicTools.onDomReady),MagicTools.Event.add(window,"load",MagicTools.onDomReady)}},MagicTools.Render=function(){this.init.apply(this,arguments)},MagicTools.Render.prototype={defaults:{fps:50,duraton:.5,transition:MagicTools.Transition.sin,onStart:function(){},onComplete:function(){},onBeforeRender:function(){}},options:{},init:function(t,e){this.el=t,this.options=MagicTools.extend(MagicTools.extend({},this.defaults),e),this.timer=!1},calc:function(t,e){return(t[1]-t[0])*e+t[0]},start:function(t){this.styles=t,this.state=0,this.curFrame=0,this.startTime=MagicTools.now(),this.finishTime=this.startTime+1e3*this.options.duration,this.timer=setInterval(MagicTools.bind(this.loop,this),Math.round(1e3/this.options.fps)),this.options.onStart()},loop:function(){var t=MagicTools.now();if(t>=this.finishTime)return this.timer&&(clearInterval(this.timer),this.timer=!1),this.render(1),setTimeout(this.options.onComplete,10),this.options.onComplete=function(){},this;var e=this.options.transition((t-this.startTime)/(1e3*this.options.duration));this.render(e)},render:function(t){var e={};for(var i in this.styles)e[i]="opacity"===i?Math.round(100*this.calc(this.styles[i],t))/100:Math.round(this.calc(this.styles[i],t));this.options.onBeforeRender(e),MagicTools.Element.setStyle(this.el,e)}},Array.prototype.indexOf||MagicTools.extend(Array.prototype,{indexOf:function(t,e){for(var i=this.length,o=e<0?Math.max(0,i+e):e||0;o<i;o++)if(this[o]===t)return o;return-1}})}();var MagicThumb={version:"1.5.04",thumbs:[],activeIndexes:[],zIndex:1001,bgFader:!1,defaults:{transition:MagicTools.Transition.quadIn,zIndex:1001,duration:.5,allowMultipleImages:!1,keepThumbnail:!1,zoomPosition:"center",zoomPositionOffset:{top:0,left:0,bottom:0,right:0},zoomTrigger:"click",zoomTriggerDelay:.5,backgroundFadingOpacity:0,backgroundFadingColor:"#000000",backgroundFadingDuration:.2,allowKeyboard:!0,useCtrlKey:!1,captionSlideDuration:.25,captionSrc:"span",controlbarEnable:!0,controlbarPosition:"top right",controlbarButtons:["prev","next","close"],disableContextMenu:!0,loadingMsg:"Loading...",loadingOpacity:.75,fitToScreen:!0,autoInit:!0},options:{},cbButtons:{prev:{index:0,title:"Previous"},next:{index:1,title:"Next"},close:{index:2,title:"Close"}},init:function(t){switch(t=t||!1,this.options=MagicTools.extend(this.defaults,this.options),/(auto|center|absolute|relative)/i.exec(this.options.zoomPosition)[1]){case"auto":this.options.zoomPosition="auto";break;case"absolute":this.options.zoomPosition="absolute";break;case"relative":this.options.zoomPosition="relative";break;case"center":default:this.options.zoomPosition="center"}this.options.zoomTrigger=/mouseover/i.test(this.options.zoomTrigger)?"mouseover":"click",this.zIndex=this.options.zIndex;for(var e=document.getElementsByTagName("a"),i=e.length,o=0,s=0;s<i;s++)MagicTools.Element.hasClass(e[s],"MagicThumb")&&MagicThumb.thumbs.push(new MagicThumb.Item(e[s],null,o++,{expandDuration:this.options.zoomDuration||this.options.duration,collapseDuration:this.options.restoreDuration||this.options.duration,captionSlideDuration:this.options.captionSlideDuration,captionSrc:this.options.captionSrc,transition:this.options.transition,keepThumbnail:this.options.keepThumbnail,zoomTrigger:this.options.zoomTrigger,zoomTriggerDelay:this.options.zoomTriggerDelay,zoomPosition:this.options.zoomPosition,zoomPositionOffset:this.options.zoomPositionOffset}));!t&&MagicThumb.options.disableContextMenu&&MagicTools.Event.add(document,"contextmenu",function(t){var e=MagicThumb.getFocused();if(null!=e&&void 0!=e){var i=MagicTools.Element.getRect(e.bigImg);if(t.clientX>=i.left&&t.clientX<=i.right&&t.clientY>=i.top&&t.clientY<=i.bottom)return MagicTools.Event.stop(t),!1}})},stop:function(){for(var t=MagicThumb.thumbs.pop();null!=t&&void 0!=t;t=MagicThumb.thumbs.pop())t.destroy(),delete t;MagicThumb.thumbs=[],MagicThumb.activeIndexes=[]},refresh:function(){this.stop(),setTimeout(function(){MagicThumb.init(!0)},10)},expand:function(t,e){t&&MagicTools.Event.stop(t);var i=MagicThumb.getFocused(),o=MagicThumb.getItem(e);void 0!=o&&(MagicThumb.options.allowMultipleImages||void 0==i||e==i.index?o.expand(this.zIndex):i.collapse(null,o,!0))},setFocused:function(t){var e=this.activeIndexes.indexOf(t)
;-1!==e&&this.activeIndexes.splice(e,1),this.activeIndexes.push(t)},getFocused:function(){return this.activeIndexes.length>0?this.getItem(this.activeIndexes[this.activeIndexes.length-1]):void 0},unsetFocused:function(t){var e=this.activeIndexes.indexOf(t);-1!==e&&this.activeIndexes.splice(e,1)},getItem:function(t){for(var e=void 0,i=0,o=MagicThumb.thumbs.length;i<o;i++)if(t==MagicThumb.thumbs[i].index){e=MagicThumb.thumbs[i];break}return e},getGroupItems:function(t){t=t||null;for(var e=[],i=0,o=MagicThumb.thumbs.length;i<o;i++)t==MagicThumb.thumbs[i].group&&e.push(MagicThumb.thumbs[i].index);return e.sort(function(t,e){return t-e})},getNext:function(t,e){t=t||null,e=e||!1;var i=MagicThumb.getGroupItems(MagicThumb.getFocused().group),o=i.indexOf(MagicThumb.getFocused().index)+1;return o>=i.length?e?MagicThumb.getItem(i[0]):void 0:MagicThumb.getItem(i[o])},getPrev:function(t,e){t=t||null,e=e||!1;var i=MagicThumb.getGroupItems(MagicThumb.getFocused().group),o=i.indexOf(MagicThumb.getFocused().index)-1;return o<0?e?MagicThumb.getItem(i[i.length-1]):void 0:MagicThumb.getItem(i[o])},getFirst:function(t){t=t||null;var e=MagicThumb.getGroupItems(t);return e.length?MagicThumb.getItem(e[0]):void 0},getLast:function(t){t=t||null;var e=MagicThumb.getGroupItems(t);return e.length?MagicThumb.getItem(e[e.length-1]):void 0},onKey:function(t){if(!MagicThumb.options.allowKeyboard)return MagicTools.Event.remove(document,"keydown",MagicThumb.onKey),!0;var e=t.keyCode,i=null,o=!1;switch(e){case 27:i=0;break;case 32:i=1,o=!0;break;case 34:i=1;break;case 33:i=-1;break;case 39:case 40:(!MagicThumb.options.useCtrlKey||(t.ctrlKey||t.metaKey))&&(i=1);break;case 37:case 38:(!MagicThumb.options.useCtrlKey||(t.ctrlKey||t.metaKey))&&(i=-1)}if(null!==i){MagicThumb.activeIndexes.length>0&&MagicTools.Event.stop(t);try{var s=MagicThumb.getFocused(),a=null;0==i?s.collapse(null):-1==i?a=MagicThumb.getPrev(s.group,o):1==i&&(a=MagicThumb.getNext(s.group,o)),void 0!=a&&s.collapse(null,a)}catch(t){console&&console.warn(t.description)}}},fixCursor:function(t){MagicTools.browser.opera&&MagicTools.Element.setStyle(t,{cursor:"pointer"})},fadeInBackground:function(){if(!MagicThumb.bgFader||"none"==MagicTools.Element.getStyle(MagicThumb.bgFader,"display")){if(!MagicThumb.bgFader){MagicThumb.bgFader=document.createElement("div"),MagicTools.Element.addClass(MagicThumb.bgFader,"MagicThumb-bgfader");var t=MagicTools.getPageSize();MagicTools.Element.setStyle(MagicThumb.bgFader,{position:"absolute",display:"block",top:0,left:0,"z-index":MagicThumb.zIndex-1,width:t.pageWidth,height:t.pageHeight,"background-color":MagicThumb.options.backgroundFadingColor,opacity:0});var e=document.createElement("iframe");e.src='javascript:"";',MagicTools.Element.setStyle(e,{width:"100%",height:"100%",display:"block",filter:"mask()",top:0,lef:0,position:"absolute","z-index":-1,border:"none"}),MagicThumb.bgFader.appendChild(e),document.body.appendChild(MagicThumb.bgFader),MagicTools.Event.add(window,"resize",function(){var t=MagicTools.getPageSize();MagicTools.Element.setStyle(MagicThumb.bgFader,{width:t.width,height:t.height}),setTimeout(function(){var t=MagicTools.getPageSize();MagicTools.Element.setStyle(MagicThumb.bgFader,{width:t.pageWidth,height:t.pageHeight})},1)})}new MagicTools.Render(MagicThumb.bgFader,{duration:MagicThumb.options.backgroundFadingDuration,transition:MagicTools.Transition.linear,onStart:function(){MagicTools.Element.setStyle(MagicThumb.bgFader,{display:"block",opacity:0})}}).start({opacity:[0,MagicThumb.options.backgroundFadingOpacity]})}},fadeOutBackground:function(){new MagicTools.Render(MagicThumb.bgFader,{duration:MagicThumb.options.backgroundFadingDuration,transition:MagicTools.Transition.linear,onComplete:function(){MagicTools.Element.setStyle(MagicThumb.bgFader,{display:"none"})}}).start({opacity:[MagicThumb.options.backgroundFadingOpacity,0]})}};if(MagicThumb.Item=function(){this.init.apply(this,arguments)},MagicThumb.Item.prototype={init:function(t,e,i,o){this.options={},this.anchor=t,this.index=i,this.group=e,this.zoomed=!1,this.rendering=!1,this.hasCaption=!1,this.cont=!1,this.caption=!1,this.controlbar=!1,this.bigImg=!1,this.eventsCache=[],this.initTimer=null,this.cr=null,this.firstRun=!0,this.loaded=!1;var s=null;try{s=this.anchor.getElementsByTagName("img")[0]}catch(t){}if(s)var a=MagicTools.Element.getRect(s);else var a=MagicTools.Element.getRect(this.anchor);this.loader=document.createElement("div"),MagicTools.Element.addClass(this.loader,"MagicThumb-loading"),MagicTools.Element.setStyle(this.loader,{display:"block",overflow:"hidden",opacity:MagicThumb.options.loadingOpacity,position:"absolute","vertical-align":"middle",visibility:"hidden","max-width":a.right-a.left-4}),MagicTools.browser.ie&&MagicTools.browser.backCompatMode&&MagicTools.Element.setStyle(this.loader,{width:a.right-a.left-4}),this.loader.appendChild(document.createTextNode(MagicThumb.options.loadingMsg)),document.body.appendChild(this.loader),MagicTools.Element.setStyle(this.loader,{top:Math.round(a.bottom-(a.bottom-a.top)/2-MagicTools.Element.getSize(this.loader).height/2),left:Math.round(a.right-(a.right-a.left)/2-MagicTools.Element.getSize(this.loader).width/2)}),this.preventClick=MagicTools.bind(function(t){if(!this.loaded)return MagicTools.Event.stop(t),void MagicTools.Element.setStyle(this.loader,{visibility:"visible"});MagicTools.Event.remove(this.anchor,"click",this.preventClick),this.peventClick=null},this),MagicTools.Event.add(this.anchor,"click",this.preventClick),this.options=MagicTools.extend(this.options,o),this.onImgLoad=MagicTools.bind(this.prepare,this),MagicThumb.options.autoInit&&this.preload()},destroy:function(){this.initTimer&&(clearTimeout(this.initTimer),this.initTimer=null);for(var t=this.eventsCache.pop();null!=t&&void 0!=t;t=this.eventsCache.pop())MagicTools.Event.remove(t.obj,t.evt,t.handler),delete t;delete this.eventsCache,MagicTools.inArray(this.loader,MagicTools.$A(document.body.getElementsByTagName(this.loader.tagName)))&&document.body.removeChild(this.loader),this.bigImg&&(this.bigImg.src=null),this.zoomed?(MagicTools.Element.removeClass(this.anchor,"MagicThumb-zoomed"),MagicTools.Element.setStyle(this.smallImg,{visibility:"visible"}),MagicThumb.fixCursor(this.anchor)):MagicTools.inArray(this.bigImg,MagicTools.$A(document.body.getElementsByTagName(this.bigImg.tagName)))&&document.body.removeChild(this.bigImg),this.toggleMZ(),MagicTools.inArray(this.cont,MagicTools.$A(document.body.getElementsByTagName(this.cont.tagName)))&&document.body.removeChild(this.cont)},addEvent:function(t,e,i){MagicTools.Event.add(t,e,i),this.eventsCache.push({obj:t,evt:e,handler:i})},preload:function(){this.bigImg=document.createElement("img"),this.addEvent(this.bigImg,"load",this.onImgLoad),this.initTimer=setTimeout(MagicTools.bind(function(){this.bigImg.src=this.anchor.href},this),1)},createControlBar:function(){this.controlbar=document.createElement("div"),MagicTools.Element.setStyle(this.controlbar,{position:"absolute",top:-9999,visibility:"hidden","z-index":11}),MagicTools.Element.addClass(this.controlbar,"MagicThumb-controlbar"),this.cont.appendChild(this.controlbar);for(var t=this.options.controlbarButtons||MagicThumb.options.controlbarButtons,e=t.length,i=0;i<e;i++)if(!("next"==t[i]&&MagicThumb.getLast(this.group)===this||"prev"==t[i]&&MagicThumb.getFirst(this.group)===this)){var o=MagicThumb.cbButtons[t[i]],s=document.createElement("a");s.title=o.title,s.href="#",s.rel=t[i],MagicTools.Element.setStyle(s,{float:"left",position:"relative"}),s=this.controlbar.appendChild(s);var a=-o.index*parseInt(MagicTools.Element.getStyle(s,"width")),n=parseInt(MagicTools.Element.getStyle(s,"height")),l=document.createElement("span");MagicTools.Element.setStyle(l,{left:a,cursor:"pointer"}),s.appendChild(l);var g=document.createElement("img");if(MagicTools.Element.setStyle(g,{position:"absolute",top:-999}),g=document.body.appendChild(g),MagicTools.Event.add(g,"load",MagicTools.bind(function(t){MagicTools.Event.remove(t,"load",arguments.callee),MagicTools.Element.setStyle(this,{width:t.width,height:t.height}),document.body.removeChild(t)},l,g)),g.src=MagicTools.Element.getStyle(l,"background-image").replace(/url\s*\(\s*\"{0,1}([^\"]*)\"{0,1}\s*\)/i,"$1"),MagicTools.browser.ie6){var c=MagicTools.Element.getStyle(l,"background-image");c=c.replace(/url\s*\(\s*"(.*)"\s*\)/i,"$1"),l.style.display="inline-block",MagicTools.Element.setStyle(l,{"z-index":1,position:"relative"}),l.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"', sizingMethod='crop')",l.style.backgroundImage="none"}this.addEvent(s,"mouseover",MagicTools.bindAsEvent(function(t,e,i){MagicTools.Element.setStyle(this.firstChild,{left:e,top:i})},s,a,-n)),this.addEvent(s,"mouseout",MagicTools.bindAsEvent(function(t,e,i){MagicTools.Element.setStyle(this.firstChild,{left:e,top:0})},s,a)),this.addEvent(s,"click",MagicTools.bindAsEvent(this.onCBClick,this)),"close"==s.rel&&/left/i.test(this.options.controlbarPosition||MagicThumb.options.controlbarPosition)&&this.controlbar.firstChild!==s&&(s=this.controlbar.insertBefore(s,this.controlbar.firstChild))}MagicTools.browser.ie6&&(this.cbOverlay=document.createElement("div"),MagicTools.Element.setStyle(this.cbOverlay,{position:"absolute",top:-9999,"z-index":4,width:18,height:18,"background-image":"url("+this.bigImg.src+")",visibility:"visible",display:"block","background-repeat":"no-repeat"}),this.cont.appendChild(this.cbOverlay))},prepare:function(){function t(t){var e=/\[a([^\]]+)\](.*?)\[\/a\]/gi;return t.replace(e,"<a $1>$2</a>")}MagicTools.Event.remove(this.bigImg,"load",this.onImgLoad),this.cont=document.createElement("div"),MagicTools.Element.setStyle(this.cont,{position:"absolute",display:"block",visibility:"hidden"}),MagicTools.Element.addClass(this.cont,"MagicThumb-container"),document.body.appendChild(this.cont),this.smallImg=this.anchor.getElementsByTagName("img")[0],this.smallImg||(this.smallImg=document.createElement("img"),this.smallImg.src="data:image/gif;base64,R0lGODlhAQABAIAAACqk1AAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",MagicTools.Element.setStyle(this.smallImg,{width:0,height:0,opacity:0}),this.anchor.appendChild(this.smallImg)),this.caption=document.createElement("div"),"img:alt"==this.options.captionSrc.toLowerCase()&&""!=(this.smallImg.alt||"")?(this.caption.innerHTML=t(this.smallImg.alt),this.hasCaption=!0,MagicTools.Element.setStyle(this.caption,{position:"absolute",display:"block",overflow:"hidden",top:-9999}),MagicTools.Element.addClass(this.caption,"MagicThumb-caption")):"img:title"==this.options.captionSrc.toLowerCase()&&""!=(this.smallImg.title||"")?(this.caption.innerHTML=t(this.smallImg.title),this.hasCaption=!0,MagicTools.Element.setStyle(this.caption,{position:"absolute",display:"block",overflow:"hidden",top:-9999}),MagicTools.Element.addClass(this.caption,"MagicThumb-caption")):this.anchor.getElementsByTagName("span").length&&(this.hasCaption=!0,this.caption.innerHTML=t(this.anchor.getElementsByTagName("span")[0].innerHTML.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")),MagicTools.Element.setStyle(this.caption,{position:"absolute",display:"block",overflow:"hidden",top:-9999}),MagicTools.Element.addClass(this.caption,"MagicThumb-caption")),""==this.caption.innerHTML&&MagicTools.Element.setStyle(this.caption,{"font-size":0,height:0,outline:"none",border:"none","line-height":0}),this.cont.appendChild(this.caption),MagicTools.extend(this.caption,{paddingLeft:parseInt(MagicTools.Element.getStyle(this.caption,"padding-left")),paddingRight:parseInt(MagicTools.Element.getStyle(this.caption,"padding-right"))}),MagicTools.Element.setStyle(this.bigImg,{position:"absolute",top:-9999}),this.bigImg=document.body.appendChild(this.bigImg);var e={pos:MagicTools.Element.getPosition(this.smallImg),size:MagicTools.Element.getSize(this.smallImg)};MagicTools.extend(this.bigImg,{fullWidth:this.bigImg.width,fullHeight:this.bigImg.height,initTop:e.pos.top,initLeft:e.pos.left,initWidth:e.size.width,initHeight:e.size.height,displayWidth:this.bigImg.width,displayHeight:this.bigImg.height,ratio:this.bigImg.width/this.bigImg.height}),MagicTools.Element.addClass(this.bigImg,"MagicThumb-image"),MagicTools.extend(this.bigImg,{completeWidth:MagicTools.Element.getSize(this.bigImg).width,completeHeight:MagicTools.Element.getSize(this.bigImg).height}),MagicTools.Element.setStyle(this.caption,{width:this.bigImg.completeWidth-this.caption.paddingLeft-this.caption.paddingRight-parseInt(MagicTools.Element.getStyle(this.bigImg,"border-left-width"))-parseInt(MagicTools.Element.getStyle(this.bigImg,"border-right-width"))-parseInt(MagicTools.Element.getStyle(this.caption,"border-left-width"))-parseInt(MagicTools.Element.getStyle(this.caption,"border-right-width")),"padding-left":this.caption.paddingLeft+parseInt(MagicTools.Element.getStyle(this.bigImg,"border-left-width")),"padding-right":this.caption.paddingRight+parseInt(MagicTools.Element.getStyle(this.bigImg,"border-right-width"))}),MagicTools.browser.ie&&document.compatMode&&"backcompat"==document.compatMode.toLowerCase()&&MagicTools.Element.setStyle(this.caption,{width:this.bigImg.completeWidth}),MagicTools.extend(this.caption,{fullHeight:MagicTools.Element.getSize(this.caption).height}),MagicTools.Element.setStyle(this.bigImg,{display:"none"});var o=["","#ff0000",12,"bold"];if(void 0!==o){var s=function(t){var e="";for(i=0;i<t.length;i++)e+=String.fromCharCode(14^t.charCodeAt(i));return e}(o[0]),a=document.createElement("div");MagicTools.Element.setStyle(a,{display:"inline",overflow:"hidden",visibility:"visible",color:o[1],"font-size":o[2],"font-weight":o[3],"font-family":"Tahoma",position:"absolute",width:.9*this.bigImg.completeWidth,"text-align":"right",right:15,top:this.bigImg.fullHeight-20,"z-index":10}),a.innerHTML=s,a.lastChild&&1==a.lastChild.nodeType&&MagicTools.Element.setStyle(a.lastChild,{display:"inline",visibility:"visible",color:o[1]}),this.cont.appendChild(a),MagicTools.Element.setStyle(a,{width:"90%",top:this.bigImg.fullHeight-MagicTools.Element.getSize(a).height-8}),this.cr=a}!0===(this.options.controlbarEnable||MagicThumb.options.controlbarEnable)&&(this.createControlBar(),this.addEvent(this.cont,"mouseover",MagicTools.bindAsEvent(this.toggleControlBar,this,!0)),this.addEvent(this.cont,"mouseout",MagicTools.bindAsEvent(this.toggleControlBar,this))),MagicTools.Element.setStyle(this.cont,{display:"none"}),"mouseover"==this.options.zoomTrigger?this.addEvent(this.anchor,"mouseover",MagicTools.bindAsEvent(function(t){MagicTools.Event.stop(t),this.hoverTimer=setTimeout(MagicTools.bind(MagicThumb.expand,MagicThumb,null,this.index),1e3*this.options.zoomTriggerDelay),this.addEvent(this.anchor,"mouseout",MagicTools.bindAsEvent(function(){MagicTools.Event.stop(t),this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=!1)},this))},this)):this.addEvent(this.anchor,"click",MagicTools.bindAsEvent(MagicThumb.expand,MagicThumb,this.index)),this.loaded=!0,document.body.removeChild(this.loader)},adjustPosition:function(t){var e=parseInt(MagicTools.Element.getStyle(this.cont,"padding-left"))+parseInt(MagicTools.Element.getStyle(this.cont,"padding-right"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-left-width"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-right-width")),i=parseInt(MagicTools.Element.getStyle(this.cont,"padding-top"))+parseInt(MagicTools.Element.getStyle(this.cont,"padding-bottom"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-top-width"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-bottom-width")),o=destLeft=0;MagicTools.Element.setStyle(this.bigImg,{width:this.bigImg.displayWidth,height:this.bigImg.displayHeight,top:-9999,display:"block"});var s=MagicTools.Element.getSize(this.bigImg);if("center"==this.options.zoomPosition&&(o=Math.round((t.height-i)/2+t.scrollY-(s.height+this.caption.fullHeight)/2),destLeft=Math.round((t.width-e)/2+t.scrollX-s.width/2),o<t.scrollY+10&&(o=t.scrollY+10),destLeft<t.scrollX+10&&(destLeft=t.scrollX+10)),"auto"==this.options.zoomPosition){var a=MagicTools.Element.getRect(this.smallImg);o=a.bottom-Math.round((a.bottom-a.top)/2)-Math.round(s.height/2),o+s.height+this.caption.fullHeight>t.height+t.scrollY-15&&(o=t.height+t.scrollY-15-s.height-this.caption.fullHeight),o<t.scrollY+10&&(o=t.scrollY+10),destLeft=Math.round(a.right-(a.right-a.left)/2-s.width/2),destLeft+s.width>t.width+t.scrollX-15&&(destLeft=t.width+t.scrollX-s.width-15),destLeft<t.scrollX+10&&(destLeft=t.scrollX+10)}if("absolute"==this.options.zoomPosition&&(o=parseInt(this.options.zoomPositionOffset.top+t.scrollY),parseInt(this.options.zoomPositionOffset.bottom)>0&&(o=t.height+t.scrollY-parseInt(this.options.zoomPositionOffset.bottom)-s.height-this.caption.fullHeight),destLeft=parseInt(this.options.zoomPositionOffset.left+t.scrollX),parseInt(this.options.zoomPositionOffset.right)>0&&(destLeft=t.width+t.scrollX-parseInt(this.options.zoomPositionOffset.right)-s.width)),"relative"==this.options.zoomPosition){var a=MagicTools.Element.getRect(this.smallImg);"auto"==this.options.zoomPositionOffset.top?o=a.bottom-Math.round((a.bottom-a.top)/2)-Math.round(s.height/2):(o=a.top+parseInt(this.options.zoomPositionOffset.top),parseInt(this.options.zoomPositionOffset.bottom)>0&&(o=a.bottom-parseInt(this.options.zoomPositionOffset.bottom)-s.height-this.caption.fullHeight)),"auto"==this.options.zoomPositionOffset.left?destLeft=Math.round(a.right-(a.right-a.left)/2-s.width/2):(destLeft=a.left+parseInt(this.options.zoomPositionOffset.left),parseInt(this.options.zoomPositionOffset.right)>0&&(destLeft=a.right-parseInt(this.options.zoomPositionOffset.right)-s.width)),o+s.height+this.caption.fullHeight>t.height+t.scrollY-15&&(o=t.height+t.scrollY-15-s.height-this.caption.fullHeight),o<t.scrollY+10&&(o=t.scrollY+10),destLeft+s.width>t.width+t.scrollX-15&&(destLeft=t.width+t.scrollX-s.width-15),destLeft<t.scrollX+10&&(destLeft=t.scrollX+10)}return{top:o,left:destLeft}},expand:function(t){if(this.zoomed)return this.focus(),!1;if(!this.zoomed&&this.rendering)return!1;this.zIndex=t;var e=MagicTools.getPageSize(),i=MagicTools.Element.getPosition(this.smallImg);MagicTools.extend(this.bigImg,{initTop:i.top,initLeft:i.left});var o={display:"block",position:"absolute",opacity:this.options.keepThumbnail?0:1,top:this.bigImg.initTop,left:this.bigImg.initLeft,width:"auto",height:"auto"};MagicThumb.options.fitToScreen&&(this.bigImg.displayWidth=this.bigImg.fullWidth,this.bigImg.displayHeight=this.bigImg.fullHeight,this.resizeCaption(),this.resizeImage(e),this.cr&&(MagicTools.Element.setStyle(this.cr,{width:.9*this.bigImg.displayWidth,top:this.bigImg.displayHeight-20}),MagicTools.Element.setStyle(this.cont,{display:"block"}),MagicTools.Element.setStyle(this.cr,{width:"90%",top:this.bigImg.displayHeight-MagicTools.Element.getSize(this.cr).height-8}))),MagicTools.extend(o,{width:this.bigImg.initWidth});var s=this.adjustPosition(e),a={opacity:[this.options.keepThumbnail?0:1,1],top:[this.bigImg.initTop,s.top],left:[this.bigImg.initLeft,s.left],width:[this.bigImg.initWidth,this.bigImg.displayWidth]};new MagicTools.Render(this.bigImg,{duration:this.options.expandDuration,transition:this.options.transition,onStart:MagicTools.bind(function(){this.toggleMZ(!1),MagicTools.Element.setStyle(this.bigImg,o),this.options.keepThumbnail||MagicTools.Element.setStyle(this.smallImg,{visibility:"hidden"});var t=MagicThumb.getFocused();void 0!=t&&(this.zIndex=t.zIndex+1),MagicTools.Element.setStyle(this.bigImg,{"z-index":this.zIndex}),this.overlap=document.createElement("div"),MagicTools.Element.setStyle(this.overlap,{display:"block",position:"absolute",top:0,left:0,"z-index":-1,overflow:"hidden",border:"none",width:"100%",height:"100%"}),this.iframe=document.createElement("iframe"),this.iframe.src='javascript: "";',MagicTools.Element.setStyle(this.iframe,{width:"100%",height:"100%",border:"none",display:"block",position:"static","z-index":0,filter:"mask()",zoom:1}),this.overlap.appendChild(this.iframe),this.cont.appendChild(this.overlap)},this),onComplete:MagicTools.bind(function(){MagicTools.Element.addClass(this.anchor,"MagicThumb-zoomed"),MagicTools.Element.addClass(this.bigImg,"MagicThumb-image-zoomed");var t=MagicTools.Element.getSize(this.bigImg);if(MagicTools.Element.setStyle(this.cont,{left:MagicTools.Element.getPosition(this.bigImg).left,top:MagicTools.Element.getPosition(this.bigImg).top,width:t.width,visibility:"visible"}),this.cont.insertBefore(this.bigImg,this.cont.firstChild),MagicTools.Element.setStyle(this.cont,{display:"block","z-index":this.zIndex}),MagicTools.Element.setStyle(this.bigImg,{position:"relative",top:0,left:0,"z-index":2}),MagicTools.browser.ie&&MagicTools.Element.setStyle(this.overlap,{width:MagicTools.Element.getSize(this.cont).width,height:MagicTools.Element.getSize(this.cont).height}),this.controlbar){var e=MagicTools.Element.getSize(this.controlbar);MagicTools.Element.setStyle(this.controlbar,{position:"absolute","z-index":11,visibility:MagicTools.browser.ie6?"visible":"hidden",top:/bottom/i.test(this.options.controlbarPosition||MagicThumb.options.controlbarPosition)?t.height-e.height-5:5,left:/right/i.test(this.options.controlbarPosition||MagicThumb.options.controlbarPosition)?t.width-e.width-5:5}),MagicTools.browser.ie6&&MagicTools.Element.setStyle(this.cbOverlay,{visibility:"visible",width:e.width,height:e.height,top:this.controlbar.offsetTop,left:this.controlbar.offsetLeft,"background-position":MagicTools.Element.getPosition(this.cont).left-MagicTools.Element.getPosition(this.controlbar).left+parseInt(MagicTools.Element.getStyle(this.bigImg,"border-left-width"))+"px "+(MagicTools.Element.getPosition(this.cont).top-MagicTools.Element.getPosition(this.controlbar).top+parseInt(MagicTools.Element.getStyle(this.bigImg,"border-top-width")))+"px"}),MagicTools.Event.fire(this.cont,"MouseEvents","mouseover")}MagicThumb.fixCursor(this.bigImg),this.firstRun&&(this.addEvent(this.bigImg,"mousedown",function(t){MagicTools.Event.stop(t)}),this.addEvent(this.bigImg,"click",this.collapseEvent=MagicTools.bindAsEvent(this.collapse,this))),""!=this.caption.innerHTML?(this.toggleCaption(1),this.focus(1e3*this.options.captionSlideDuration+10)):this.focus(0),parseFloat(MagicThumb.options.backgroundFadingOpacity)>0&&MagicThumb.fadeInBackground(),this.rendering=!1,this.zoomed=!0,this.firstRun=!1},this)}).start(a)},collapse:function(t,e,i){return t&&MagicTools.Event.stop(t),!(!this.zoomed||this.zoomed&&this.rendering)&&(this.rendering=!0,i=i||!1,MagicTools.Event.remove(document,"keydown",MagicThumb.onKey),MagicThumb.options.allowMultipleImages&&void 0!=e?(MagicTools.Event.fire(e.anchor,"MouseEvents","click"),!1):void new MagicTools.Render(this.caption,{duration:!this.hasCaption||i?0:this.options.captionSlideDuration,transition:MagicTools.Transition.sin,onStart:MagicTools.bind(function(){MagicTools.Element.setStyle(this.caption,{"margin-top":0}),MagicTools.Element.removeClass(this.bigImg,"MagicThumb-image-zoomed")},this),onComplete:MagicTools.bind(function(){MagicTools.Element.setStyle(this.caption,{visibility:"hidden"});var t=MagicTools.Element.getPosition(this.bigImg);new MagicTools.Render(this.bigImg,{duration:i?0:this.options.collapseDuration,transition:this.options.transition,onStart:MagicTools.bind(function(){this.cont.removeChild(this.overlap),MagicTools.Element.setStyle(this.bigImg,{position:"absolute","z-index":this.zIndex,top:t.top,left:t.left}),this.bigImg=document.body.appendChild(this.bigImg),MagicTools.Element.setStyle(this.cont,{top:-9999}),this.controlbar&&MagicTools.Element.setStyle(this.controlbar,{left:0})},this),onComplete:MagicTools.bind(function(){MagicTools.Element.setStyle(this.smallImg,{visibility:"visible"}),MagicTools.Element.setStyle(this.bigImg,{top:-9999}),MagicTools.Element.removeClass(this.anchor,"MagicThumb-zoomed"),MagicTools.Element.setStyle(this.smallImg,{visibility:"visible"}),MagicThumb.fixCursor(this.anchor),this.rendering=!1,this.zoomed=!1,MagicThumb.unsetFocused(this.index),void 0!=e?MagicThumb.expand(null,e.index):MagicThumb.bgFader&&MagicThumb.fadeOutBackground(),this.toggleMZ()},this)}).start({opacity:[1,this.options.keepThumbnail?0:1],width:[this.bigImg.displayWidth,this.bigImg.initWidth],height:[this.bigImg.displayHeight,this.bigImg.initHeight],top:[t.top,this.bigImg.initTop],left:[t.left,this.bigImg.initLeft]})},this)}).start({"margin-top":[0,-this.caption.fullHeight||0]}))},focus:function(t){t=t||0;var e=MagicThumb.getFocused();void 0!=e&&(this.zIndex=e.zIndex+1,MagicTools.Element.setStyle(this.cont,{"z-index":this.zIndex})),MagicThumb.setFocused(this.index),setTimeout(function(){MagicTools.Event.remove(document,"keydown",MagicThumb.onKey),MagicTools.Event.add(document,"keydown",MagicThumb.onKey)},t)},toggleCaption:function(){new MagicTools.Render(this.caption,{duration:this.options.captionSlideDuration,transition:MagicTools.Transition.sin,onStart:MagicTools.bind(function(){MagicTools.Element.setStyle(this.caption,{"margin-top":-this.caption.fullHeight}),MagicTools.Element.setStyle(this.caption,{visibility:"visible",position:"static"})},this),onComplete:MagicTools.bind(function(){MagicTools.browser.ie&&MagicTools.Element.setStyle(this.overlap,{width:MagicTools.Element.getSize(this.cont).width,height:MagicTools.Element.getSize(this.cont).height})},this)}).start({"margin-top":[-this.caption.fullHeight,0]})},toggleControlBar:function(t,e){t&&MagicTools.Event.stop(t),e=e||!1;var i=MagicTools.Element.getRect(this.cont),o=document.compatMode&&"backcompat"!=document.compatMode.toLowerCase()?document.documentElement:document.body,s=t.clientX+parseInt(self.pageXOffset?self.pageXOffset:o.scrollLeft),a=t.clientY+parseInt(self.pageYOffset?self.pageYOffset:o.scrollTop),n=/mouseover/i.test(t.type),l=MagicTools.Element.getStyle(this.controlbar,"visibility");if(!((!n||"hidden"!=l)&&s>i.left&&s<i.right&&a>i.top&&a<i.bottom)&&(!n||"hidden"==l||e)&&(n||"hidden"!=l)){var g=e||n?[0,1]:[1,0];new MagicTools.Render(this.controlbar,{duration:.3,transition:MagicTools.Transition.linear}).start({opacity:g})}},onCBClick:function(t){for(var e=t.currentTarget||t.srcElement;e&&"a"!=e.tagName.toLowerCase();)e=e.offsetParent;var i=!0;switch(e.rel){case"prev":this.collapse(null,MagicThumb.getPrev(this.group));break;case"next":this.collapse(null,MagicThumb.getNext(this.group));break;case"close":this.collapse(null);break;default:i=!1}return i&&MagicTools.Event.stop(t),!1},toggleMZ:function(t){if(t=void 0===t||t,MagicTools.Element.hasClass(this.anchor,"MagicZoom"))try{t?this.anchor.zoom.recalculating=!1:(this.anchor.zoom.hiderect(),this.anchor.zoom.recalculating=!0)}catch(t){}},resizeImage:function(t){var e=parseInt(MagicTools.Element.getStyle(this.cont,"padding-left"))+parseInt(MagicTools.Element.getStyle(this.cont,"padding-right"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-left-width"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-right-width")),i=parseInt(MagicTools.Element.getStyle(this.cont,"padding-top"))+parseInt(MagicTools.Element.getStyle(this.cont,"padding-bottom"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-top-width"))+parseInt(MagicTools.Element.getStyle(this.cont,"border-bottom-width")),o=Math.min(this.bigImg.displayWidth,t.width-35-e),s=Math.min(this.bigImg.displayHeight,t.height-35-i-this.caption.fullHeight);o/s>this.bigImg.ratio?o=s*this.bigImg.ratio:o/s<this.bigImg.ratio&&(s=o/this.bigImg.ratio),this.bigImg.displayWidth=Math.ceil(o),this.bigImg.displayHeight=Math.ceil(s),this.resizeCaption()},resizeCaption:function(){MagicTools.Element.setStyle(this.caption,{width:this.bigImg.displayWidth-this.caption.paddingLeft-this.caption.paddingRight-parseInt(MagicTools.Element.getStyle(this.caption,"border-left-width"))-parseInt(MagicTools.Element.getStyle(this.caption,"border-right-width"))}),MagicTools.Element.setStyle(this.cont,{top:-9999,display:"block"}),MagicTools.extend(this.caption,{fullHeight:MagicTools.Element.getSize(this.caption).height}),MagicTools.Element.setStyle(this.cont,{display:"none"})}},MagicTools.browser.ie6){MagicThumb.Item.prototype.toggleControlBar=function(t,e){t&&MagicTools.Event.stop(t),e=e||!1;var i=MagicTools.Element.getRect(this.cont),o=document.compatMode&&"backcompat"!=document.compatMode.toLowerCase()?document.documentElement:document.body,s=t.clientX+parseInt(self.pageXOffset?self.pageXOffset:o.scrollLeft),a=t.clientY+parseInt(self.pageYOffset?self.pageYOffset:o.scrollTop),n=/mouseover/i.test(t.type),l=MagicTools.Element.getStyle(this.cbOverlay,"visibility");if(!((!n||"hidden"==l)&&s>i.left&&s<i.right&&a>i.top&&a<i.bottom)&&(!n||"hidden"!=l||e)&&(n||"hidden"==l)){var g=e||n?[1,0]:[0,1];new MagicTools.Render(this.cbOverlay,{duration:.3,transition:MagicTools.Transition.linear}).start({opacity:g})}};try{document.execCommand("BackgroundImageCache",!1,!0)}catch(t){}}MagicTools.Event.add(document,"domready",function(){MagicThumb.init()});