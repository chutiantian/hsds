function drewAnalysis(t){this.dom=t,this.myChart=echarts.init(document.getElementById(t)),this.opts={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},textStyle:{color:"#54240d"},backgroundColor:"rgba(255,255,255,0.8)"},legend:{data:["采购金额","节省金额"],x:"80px",y:"30px"},calculable:!1,yAxis:[{type:"value"}],color:["#ffa200","#2ebdff"],xAxis:[{data:[]}],series:[{name:"采购金额",barWidth:"30",type:"bar",stack:"1",data:[]},{name:"节省金额",barWidth:"30",type:"bar",stack:"1",data:[]}]}}function orderNum(t){this.dom=t,this.myChart=echarts.init(document.getElementById(t)),this.opts={calculable:!1,series:[{name:"访问来源",type:"pie",center:["50%","50%"],radius:["40%","70%"],itemStyle:{normal:{label:{position:"outside",show:!0,formatter:"{d}%\n{b}",textStyle:{fontSize:14}},labelLine:{show:!0,length:20}},emphasis:{label:{show:!1,position:"center",textStyle:{fontSize:"30",fontWeight:"bold"}}}},data:[]}]}}function contrast2(){var t=echarts.init(document.getElementById("drew-contrast2"));option={calculable:!1,series:[{name:"访问来源",type:"pie",center:["50%","50%"],radius:["40%","70%"],itemStyle:{normal:{label:{position:"outside",show:!0,formatter:"{d}%\n{b}",textStyle:{fontSize:14}},labelLine:{show:!0,length:20}},emphasis:{label:{show:!1,position:"center",textStyle:{fontSize:"30",fontWeight:"bold"}}}},data:[{value:335,name:"直接访问"},{value:310,name:"邮件营销"},{value:234,name:"联盟广告"},{value:135,name:"视频广告"},{value:1548,name:"搜索引擎"}]}]},t.setOption(option)}function moneyNum(t){this.dom=t,this.myChart=echarts.init(document.getElementById(t)),this.opts={calculable:!1,series:[{name:"访问来源",type:"pie",center:["50%","50%"],radius:["40%","70%"],itemStyle:{normal:{label:{position:"outside",show:!0,formatter:"{d}%\n{b}",textStyle:{fontSize:14}},labelLine:{show:!0,length:20}},emphasis:{label:{show:!1,position:"center",textStyle:{fontSize:"30",fontWeight:"bold"}}}},data:[]}]}}$(function(){function t(t){filldom("partnames-tpl",t,"partnames")}function e(){function t(t){new drewAnalysis("drew-analysis").init(t);for(var e="",s=0;s<12;s++)e+="<tr><td>"+t.dates[s]+"</td><td>"+t.discounts[s]+"</td><td>"+t.subductions[s]+"</td></tr>";$("#exaldatatbd").html(e)}getdata("../js/json/getAnalysis.json",a,"",t)}function s(t){if(1==t.code){new orderNum("drew-contrast1").init(t)}}function i(t){if(1==t.code){new moneyNum("drew-contrast2").init(t)}}var a={govid:""};e(),$(".menu-changeval").on("click","ul li",function(){""!=$(this).attr("data-govid")&&($("#partnames").hasClass("showall")||($("#partnames").addClass("showall"),$("#partnames").prepend('<li data-govid = "">全部</li>'))),$(this).parent().siblings("button").find("span").text($(this).text()),a.govid=$(this).attr("data-govid"),e()}),getdata("../js/json/partment.json","","",t),getdata("../js/json/pie.json","","",s),getdata("../js/json/pie.json","","",i),$("button").click(function(){if(!$(this).hasClass("btn-active")){var t=$(this).index();$(this).addClass("btn-active").siblings("button").removeClass("btn-active"),0==t?($("#drew-analysis").addClass("showdiv").siblings("#exaldata").removeClass("showdiv"),$(".menu-down").hide().siblings(".menu-changeval").show()):($("#exaldata").addClass("showdiv").siblings("#drew-analysis").removeClass("showdiv"),$(".menu-down").show().siblings(".menu-changeval").hide())}})}),drewAnalysis.prototype.init=function(t){this.opts.xAxis[0].data=t.dates,this.opts.series[0].data=t.discounts,this.opts.series[1].data=t.subductions,this.myChart.setOption(this.opts),window.onresize=this.myChart.resize},orderNum.prototype.init=function(t){this.opts.series[0].data=t.nameAndCounts,this.myChart.setOption(this.opts),window.onresize=this.myChart.resize},moneyNum.prototype.init=function(t){this.opts.series[0].data=t.nameAndCounts,this.myChart.setOption(this.opts),window.onresize=this.myChart.resize};